<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Categorias</title>

	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/sweetalert2.css">
	<link rel="stylesheet" href="css/material.min.css">
	<link rel="stylesheet" href="css/jquery.mCustomScrollbar.css">
	<link rel="stylesheet" href="css/material-design-iconic-font.min.css">
	<link rel="stylesheet" href="vendor/datatables/dataTables.bootstrap4.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body>
	<!-- Notifications area -->
	<!-- Notifications area -->
	{{>notifications }}
	<!-- navBar -->
	{{>navBar }}
	<!-- navLateral -->
	{{>navLateral }}
	<!-- pageContent -->
	{{!-- tabla correcta --}}
	<section class="full-width pageContent">
		{{!-- CRUD --}}
		<div id="wrapper">

			<div id="content-wrapper" class="d-flex flex-column">
				<div id="content">
					<div class="container-fluid">
						<div class="card shadow mb-4">
							<div class="card-header py-3 d-flex justify-content-between">
								<h1>Categorias</h1>
								<h6 class="m-0 font-weight-bold text-primary"></h6>
								<button type="button" class="btn btn-success" data-bs-toggle="modal"
									data-bs-target="#createModal">
									<i class="bi bi-person-plus"></i> Agregar
								</button>
							</div>


							<div class="table-responsive">
								<table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
									<thead>
										<tr>
											<th>ID</th>
											<th>NOMBRE</th>
											<th>DESCRIPCION</th>
											<th>ACCIONES</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>001</td>
											<td>lacteos</td>
											<td>derivados de la leche</td>
											<td>
												<button class="btn btn-success p-2" data-bs-toggle="modal"
													data-bs-target="#viewModal"><i class=" bi bi-eye-fill"></i>
												</button>
												<button class="btn btn-warning p-2" data-bs-toggle="modal"
													data-bs-target="#editModal"><i class="bi bi-pen"></i>
												</button>
												<button class="btn btn-danger p-2" name="botonBorrarcategoria"><i
														class="bi bi-trash-fill"></i></button>
											</td>
										</tr>
										<tr>
											<td>002</td>
											<td>hogar</td>
											<td>cosas para el hogar</td>
											<td>
												<button class="btn btn-success p-2" data-bs-toggle="modal"
													data-bs-target="#viewModal">
													<i class="bi bi-eye-fill"></i>
												</button>
												<button class="btn btn-warning p-2" class="submit"
													data-bs-toggle="modal" data-bs-target="#editModal"><i
														class="bi bi-pen"></i>
												</button>
												<button class="btn btn-danger p-2" name="botonBorrarcategoria"><i
														class="bi bi-trash-fill"></i></button>
											</td>
										</tr>
									</tbody>
								</table>
							</div>

						</div>
					</div>
					<!-- /.container-fluid -->
				</div>
				<!-- End of Main Content -->
			</div>
			<!-- End of Content Wrapper -->
		</div>

	</section>


	{{!-- --------------------------------------------MODAL CREATE------------------------------------------ --}}
	<div class="modal fade" id="createModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="exampleModalLabel">Nueva Categoria</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form class="row g-3" id="formularioCategoria">
						<div class="col-md-6">
							<label for="inputNombreCategoria" class="form-label">Nombre Categoria</label>
							<input type="text" class="form-control" id="inputNombreCategoria" required>
							<div class="invalid-feedback">Por favor ingresa un nombre de categoría.</div>
						</div>
						<div class="col-md-6">
							<label for="inputDescripcion" class="form-label">Descripción</label>
							<input type="text" class="form-control" id="inputDescripcion" required>
							<div class="invalid-feedback">Por favor ingresa una descripción.</div>
						</div>

						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
							<button type="button" class="btn btn-primary" id="guardarBotoncategoria">Guardar</button>
						</div>
					</form>

				</div>

			</div>
		</div>

		{{!-- ------------------------------------------- MODAL EDIT -------------------------------------------- --}}
		<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">

			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h1 class="modal-title fs-5" id="exampleModalLabel">Editar Categoria</h1>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<form class="row g-3">
							<div class="col-md-6">
								<label for="inputNombreProducto" class="form-label">Nombre producto</label>
								<input type="text" class="form-control" id="inputNombreProducto" required>
								<div class="invalid-feedback">Por favor ingresa el nombre del producto.</div>
							</div>
							<div class="col-md-6">
								<label for="inputDescripcion" class="form-label">Descripción</label>
								<input type="text" class="form-control" id="inputDescripcion" required>
								<div class="invalid-feedback">Por favor ingresa la descripción del producto.</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary"
									data-bs-dismiss="modal">Cancelar</button>
								<button type="button" class="btn btn-primary" id="botonGuardar">Guardar</button>
							</div>
						</form>

					</div>

				</div>
			</div>

			{{!-- ------------------------------------------- MODAL VER
			DETALLE----------------------------------------------}}
			<div class="modal fade" id="viewModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">

				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h1 class="modal-title fs-5" id="exampleModalLabel">Detalle Categoria</h1>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">

								<div class="col-md-6">
									<label for="inputPhone" class="form-label">Nombre Categoria: lacteos</label>
								</div>
								<div class="col-12">
									<label for="inputAddress" class="form-label">Descripcion:derivados de la
										leche</label>
								</div>
								<div class="modal-footer">
									<button type="submit" class="btn btn-secondary"
										data-bs-dismiss="modal">Cerrar</button>
								</div>
						</div>

					</div>

				</div>

			</div>
		</div>

		<!-- endPageContent -->

		<script>
			const guardarBotoncategoria = document.getElementById("guardarBotoncategoria");
			guardarBotoncategoria.addEventListener("click", function (event) {
				var nombreCategoria = document.getElementById("inputNombreCategoria").value.trim();
				var descripcion = document.getElementById("inputDescripcion").value.trim();

				if (nombreCategoria === "" || descripcion === "") {
					if (nombreCategoria === "") {
						document.getElementById("inputNombreCategoria").classList.add("is-invalid");
					} else {
						document.getElementById("inputNombreCategoria").classList.remove("is-invalid");
					}

					if (descripcion === "") {
						document.getElementById("inputDescripcion").classList.add("is-invalid");
					} else {
						document.getElementById("inputDescripcion").classList.remove("is-invalid");
					}
					// Prevenir el envío del formulario si la validación falla
					event.preventDefault();
				} else {
					// No es necesario prevenir el envío del formulario si la validación pasa
					Swal.fire({
						position: "top-center",
						icon: "success",
						title: "¡Categoria guardada exitosamente!",
						showConfirmButton: false,
						timer: 1500
					});
				}
			});


			document.getElementById('botonGuardar').addEventListener('click', function () {
				// Obtener valores de los campos
				var nombreProducto = document.getElementById('inputNombreProducto').value;
				var descripcion = document.getElementById('inputDescripcion').value;

				// Verificar campos vacíos
				if (!nombreProducto || !descripcion) {
					// Mostrar mensaje de error y evitar envío del formulario
					if (!nombreProducto) {
						document.getElementById('inputNombreProducto').classList.add('is-invalid');
					} else {
						document.getElementById('inputNombreProducto').classList.remove('is-invalid');
					}
					if (!descripcion) {
						document.getElementById('inputDescripcion').classList.add('is-invalid');
					} else {
						document.getElementById('inputDescripcion').classList.remove('is-invalid');
					}
				} else {
					// Si todos los campos están completos, enviar formulario
					document.getElementById('inputNombreProducto').classList.remove('is-invalid');
					document.getElementById('inputDescripcion').classList.remove('is-invalid');
					// Aquí puedes enviar el formulario o realizar otras acciones
					console.log("Formulario enviado correctamente");
				}
			});


			const botonBorrarcategoria = document.getElementsByName("botonBorrarcategoria");

			for (let i = 0; i < botonBorrarcategoria.length; i++) {
				botonBorrarcategoria[i].addEventListener("click", function () {
					// Código a ejecutar cuando se hace clic en cualquier botón "borrarBoton"
					const swalWithBootstrapButtons = Swal.mixin({
						customClass: {
							confirmButton: "btn btn-success",
							cancelButton: "btn btn-danger"
						},
						buttonsStyling: false
					});
					swalWithBootstrapButtons.fire({
						title: "Estas seguro?",
						text: "Esta acción no se puede deshacer.",
						icon: "warning",
						showCancelButton: true,
						confirmButtonText: "Si, eliminar!",
						cancelButtonText: "No, cancelar!",
						reverseButtons: true
					}).then((result) => {
						if (result.isConfirmed) {
							swalWithBootstrapButtons.fire({
								title: "Eliminado!",
								text: "La categoria a sido eliminada.",
								icon: "success"
							});
						} else if (
							result.dismiss === Swal.DismissReason.cancel
						) {
							swalWithBootstrapButtons.fire({
								title: "Cancelado",
								text: "La categoria esta a salvo :)",
								icon: "error"
							});
						}
					});
				});
			}
		</script>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
			crossorigin="anonymous"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script src="vendor/jquery/jquery.min.js"></script>
		<script src="js/jquery-1.11.2.min.js"></script>
		<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
		<script src="js/sweetalert2.min.js"></script>
		<script src="js/main.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>

</html>