<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Sales</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

	<!-- Bootstrap Icons -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

	<!-- Otros estilos -->
	<link rel="stylesheet" href="css/normalize.min.css">
	<link rel="stylesheet" href="/public/css/sales.css">
	<link rel="stylesheet" href="css/sweetalert2.min.css">
	<link rel="stylesheet" href="css/material.min.css">
	<link rel="stylesheet" href="css/material-design-iconic-font.min.css">
	<link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
	<link rel="stylesheet" href="css/main.css">
	<link href="/public/vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">


	<head>
		<!-- Bootstrap CSS -->
		<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

		<!-- Font Awesome -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

		<!-- SweetAlert2 CSS -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.0.18/sweetalert2.min.css" rel="stylesheet">
	</head>

</head>

<body>
	<!-- Notifications area -->
	{{>notifications }}
	<!-- navBar -->
	{{>navBar }}
	<!-- navLateral -->
	{{>navLateral }}
	<!-- pageContent -->

	<div class=" full-width pageContent">

		<div class="card shadow m-4">




			<section class="full-width">
				<div class="card-body">
					{{!-- CRUD --}}
					<div class="mdl-grid">
						<div class="mdl-cell mdl-cell--4-col-phone mdl-cell--8-col-tablet mdl-cell--12-col-desktop">


							<div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
								<div class="row m-0 p-0">

									<div class="col-4">
										<h4 class="d-flex justify-content px-5 ">Devoluciones</h4>
									</div>

									<div class="col-8 d-flex justify-content py-3">
										<a href="#tabNewProduct" class="mdl-tabs__tab is-active">LOCAL</a>
										<a href="#tabListProducts" class="mdl-tabs__tab">VENTA</a>
									</div>
								</div>

								<div class="mdl-tabs__panel is-active" id="tabNewProduct">
									<div class="mdl-grid" style=" display: flex;  float: left; width: 100%;">
										<div
											class="mdl-cell mdl-cell--4-col-phone mdl-cell--8-col-tablet mdl-cell--12-col-desktop">
											<div class="full-width panel mdl-shadow--2dp">
												{{!-- CRUD --}}
												<div id="wrapper">
													<div id="content-wrapper" class="d-flex flex-column font">
														<div id="content">
															<div class="container-fluid">
																<div class="card shadow mb-4"
																	style="height: 410px; display: static; overflow-y: scroll; max-height: 410px;">
																	<div class="card-header d-flex justify-content-end">
																		<button class="btn btn-dark p-2" type="button"
																			data-bs-toggle="modal"
																			data-bs-target="#createModal"><i
																				class="bi bi-person-plus"></i>Agregar

																		</button>
																	</div>

																	<div class="card-body">
																		<div class="table-responsive">
																			<table
																				class="table table-bordered table-hover table-sm "
																				id="dataTable2" width="100%"
																				cellspacing="0">
																				<thead>
																					<tr>
																						<th>N° DEVOLUCION</th>
																						<th>NOMBRE PRODUCTO</th>
																						<th>CODIGO</th>
																						<th>TIPO</th>
																						<th>CANTIDAD</th>
																						<th>EMPRESA</th>
																						<th>FECHA</th>
																						<th>ESTADO</th>
																					</tr>
																				</thead>
																				<tbody>
																					<tr>
																						<td>001</td>
																						<td>leche colanta 1L</td>
																						<td>633210254</td>
																						<td>Caducidad</td>
																						<td>4</td>
																						<td>Colanta</td>
																						<td>12/03/2024</td>
																						<td>
																							<div
																								class="form-check form-switch m-2">
																								<input
																									class="form-check-input"
																									type="checkbox"
																									role="switch"
																									checked>
																							</div>
																						</td>
																					</tr>
																					<tr>
																						<td>002</td>
																						<td>Trapero</td>
																						<td>6332971</td>
																						<td>Defectuoso</td>
																						<td>5</td>
																						<td>Unilever</td>
																						<td>11/01/2024</td>
																						<td>
																							<div
																								class="form-check form-switch m-2 ">
																								<input
																									class="form-check-input"
																									type="checkbox"
																									role="switch"
																									checked>
																							</div>
																						</td>
																					</tr>
																					<tr>
																						<td>002</td>
																						<td>Trapero</td>
																						<td>6332971</td>
																						<td>Defectuoso</td>
																						<td>5</td>
																						<td>Unilever</td>
																						<td>11/01/2024</td>
																						<td>
																							<div
																								class="form-check form-switch m-2 ">
																								<input
																									class="form-check-input"
																									type="checkbox"
																									role="switch"
																									checked>
																							</div>
																						</td>
																					</tr>
																					<tr>
																						<td>002</td>
																						<td>Trapero</td>
																						<td>6332971</td>
																						<td>Defectuoso</td>
																						<td>5</td>
																						<td>Unilever</td>
																						<td>11/01/2024</td>
																						<td>
																							<div
																								class="form-check form-switch m-2 ">
																								<input
																									class="form-check-input"
																									type="checkbox"
																									role="switch"
																									checked>
																							</div>
																						</td>
																					</tr>
																					<tr>
																						<td>002</td>
																						<td>Trapero</td>
																						<td>6332971</td>
																						<td>Defectuoso</td>
																						<td>5</td>
																						<td>Unilever</td>
																						<td>11/01/2024</td>
																						<td>
																							<div
																								class="form-check form-switch m-2 ">
																								<input
																									class="form-check-input"
																									type="checkbox"
																									role="switch"
																									checked>
																							</div>
																						</td>
																					</tr>
																					<tr>
																						<td>002</td>
																						<td>Trapero</td>
																						<td>6332971</td>
																						<td>Defectuoso</td>
																						<td>5</td>
																						<td>Unilever</td>
																						<td>11/01/2024</td>
																						<td>
																							<div
																								class="form-check form-switch m-2 ">
																								<input
																									class="form-check-input"
																									type="checkbox"
																									role="switch"
																									checked>
																							</div>
																						</td>
																					</tr>
																				</tbody>
																			</table>
																		</div>
																	</div>
																</div>
															</div>
															<!-- /.container-fluid -->
														</div>
														<!-- End of Main Content -->
													</div>
													<!-- End of Content Wrapper -->
												</div>

											</div>
										</div>
									</div>
								</div>





								{{!-- DEVOLUCIONES de VENTA --}}
								<div class="mdl-tabs__panel" id="tabListProducts">
									<div class="mdl-grid" style=" float: left; width: 100%;">
										<div
											class="mdl-cell mdl-cell--4-col-phone mdl-cell--8-col-tablet mdl-cell--12-col-desktop">
											{{!-- CRUD --}}
											<div id="wrapper">
												<div id="content-wrapper" class="d-flex flex-column font">
													<div id="content">
														<div class="container-fluid">
															<div class="card shadow mb-4"
																style="height: 410px; display: static; overflow-y: scroll; max-height: 410px;">
																<div class="card-header d-flex justify-content-end">
																	<button class="btn btn-dark p-2" type="button"
																		data-bs-toggle="modal"
																		data-bs-target="#editModal"><i
																			class="bi bi-person-plus"></i>Agregar

																	</button>
																</div>
																<div class="card-body">
																	<div class="table-responsive">
																		<table
																			class="table table-bordered table-hover table-sm "
																			id="dataTable" width="100%" cellspacing="0">
																			<thead>
																				<tr>
																					<th>N° DEVOLUCION</th>
																					<th>NOMBRE PRODUCTO</th>
																					<th>CODIGO</th>
																					<th>MOTIVO</th>
																					<th>CANTIDAD</th>
																					<th>REEMBOLSO</th>
																					<th>VALOR</th>
																					<th>FECHA</th>
																					<th>ESTADO</th>
																				</tr>
																			</thead>
																			<tbody>
																				<tr>
																					<td>049</td>
																					<td>Jabón Rey 125g</td>
																					<td>745215</td>
																					<td>Reembolso</td>
																					<td>2</td>
																					<td>Efectivo</td>
																					<td>4000</td>
																					<td>10/03/2024</td>
																					<td>
																						<div
																							class="form-check form-switch m-2">
																							<input
																								class="form-check-input"
																								type="checkbox"
																								role="switch" checked>
																						</div>
																					</td>
																				</tr>
																				<tr>
																					<td>050</td>
																					<td>Aromatel 250g</td>
																					<td>851334</td>
																					<td>Reembolso</td>
																					<td>1</td>
																					<td>Producto</td>
																					<td>0</td>
																					<td>02/01/2024</td>
																					<td>
																						<div
																							class="form-check form-switch m-2 ">
																							<input
																								class="form-check-input"
																								type="checkbox"
																								role="switch" checked>
																						</div>
																					</td>
																				</tr>
																				<tr>
																					<td>051</td>
																					<td>Aromatel 250g</td>
																					<td>851334</td>
																					<td>Reembolso</td>
																					<td>1</td>
																					<td>Producto</td>
																					<td>0</td>
																					<td>02/01/2024</td>
																					<td>
																						<div
																							class="form-check form-switch m-2 ">
																							<input
																								class="form-check-input"
																								type="checkbox"
																								role="switch" checked>
																						</div>
																					</td>
																				</tr>
																				<tr>
																					<td>052</td>
																					<td>Aromatel 250g</td>
																					<td>851334</td>
																					<td>Reembolso</td>
																					<td>1</td>
																					<td>Producto</td>
																					<td>0</td>
																					<td>02/01/2024</td>
																					<td>
																						<div
																							class="form-check form-switch m-2 ">
																							<input
																								class="form-check-input"
																								type="checkbox"
																								role="switch" checked>
																						</div>
																					</td>
																				</tr>
																				<tr>
																					<td>053</td>
																					<td>Aromatel 250g</td>
																					<td>851334</td>
																					<td>Reembolso</td>
																					<td>1</td>
																					<td>Producto</td>
																					<td>0</td>
																					<td>02/01/2024</td>
																					<td>
																						<div
																							class="form-check form-switch m-2 ">
																							<input
																								class="form-check-input"
																								type="checkbox"
																								role="switch" checked>
																						</div>
																					</td>
																				</tr>
																				<tr>
																					<td>054</td>
																					<td>Aromatel 250g</td>
																					<td>851334</td>
																					<td>Reembolso</td>
																					<td>1</td>
																					<td>Producto</td>
																					<td>0</td>
																					<td>02/01/2024</td>
																					<td>
																						<div
																							class="form-check form-switch m-2 ">
																							<input
																								class="form-check-input"
																								type="checkbox"
																								role="switch" checked>
																						</div>
																					</td>
																				</tr>
																				<tr>
																					<td>055</td>
																					<td>Aromatel 250g</td>
																					<td>851334</td>
																					<td>Reembolso</td>
																					<td>1</td>
																					<td>Producto</td>
																					<td>0</td>
																					<td>02/01/2024</td>
																					<td>
																						<div
																							class="form-check form-switch m-2 ">
																							<input
																								class="form-check-input"
																								type="checkbox"
																								role="switch" checked>
																						</div>
																					</td>
																				</tr>
																				<tr>
																					<td>056</td>
																					<td>Aromatel 250g</td>
																					<td>851334</td>
																					<td>Reembolso</td>
																					<td>1</td>
																					<td>Producto</td>
																					<td>0</td>
																					<td>02/01/2024</td>
																					<td>
																						<div
																							class="form-check form-switch m-2 ">
																							<input
																								class="form-check-input"
																								type="checkbox"
																								role="switch" checked>
																						</div>
																					</td>
																				</tr>
																			</tbody>
																		</table>
																	</div>
																</div>
															</div>
														</div>
														<!-- /.container-fluid -->
													</div>
													<!-- End of Main Content -->
												</div>
												<!-- End of Content Wrapper -->
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
			</section>

		</div>
	</div>

	{{!-- --------------------------------------------MODAL CREATE------------------------------------------
	--}}
	<div class="modal fade" id="createModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="exampleModalLabel">Nueva Devolución Local</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form class="row g-3 needs-validation" novalidate id="createForm">
						<!-- Tu formulario aquí -->
						<div class="col-md-6">
							<label for="inputNit" class="form-label">Código</label>
							<i class="bi bi-upc-scan"> <input type="number" class="form-control" id="inputNit" required
									pattern="[0-9]+">
								<div class="invalid-feedback">
									Por favor, ingrese un código válido (solo números).
								</div>
							</i>

						</div>

						<div class="col-md-6">
							<label for="inputProducto" class="form-label">Producto</label>
							<input type="text" class="form-control" id="inputProducto" required pattern="[a-zA-Z0-9]+">
							<div class="invalid-feedback">
								Por favor, ingrese el nombre del producto.
							</div>
						</div>

						<div class="col-md-6">
							<label for="inputCantidad" class="form-label">Cantidad</label>
							<input type="number" class="form-control" id="inputCantidad" min="1" required>
							<div class="invalid-feedback">
								Por favor, ingrese una cantidad válida (mínimo 1).
							</div>
						</div>

						<div class="col-md-6">
							<label for="inputProveedor" class="form-label">Proveedor/Empresa</label>
							<input type="text" class="form-control" id="inputProveedor" required pattern="[a-zA-Z0-9]+">
							<div class="invalid-feedback">
								Por favor, ingrese el nombre del proveedor/empresa.
							</div>
						</div>

						<div class="form-group col-md-12">
							<label for="exampleFormControlSelect1" class="form-label">Tipo Devolución</label>
							<select class="form-control" id="exampleFormControlSelect1" required>
								<option disabled selected value="">Seleccione</option>
								<option>Caducidad</option>
								<option>Defecto</option>
								<option>Reembolso</option>
							</select>
							<div class="invalid-feedback">
								Por favor, seleccione un tipo de devolución.
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
					<button type="button" class="btn btn-primary submit-button"
						onclick="handleSubmit1()">Guardar</button>
				</div>
			</div>
		</div>
	</div>


	{{!-- ------------------------------------------- MODAL EDIT--------------------------------------------
	--}}
	<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="exampleModalLabel">Nueva Devolución por Venta</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body my-3">
					<form class="row g-3 needs-validation" novalidate id="editForm">
						<!-- Tu formulario aquí -->
						<div class="row">
							<div class="form-group col-md-4">
								<label for="exampleFormControlSelect1" class="form-label">Motivo</label>
								<select class="form-control" id="SelectMotivo" required>
									<option value="">Seleccione</option>
									<option value="caducidad">Caducidad</option>
									<option value="defecto">Defecto</option>
									<option value="reembolso">Reembolso</option>
								</select>
								<div class="invalid-feedback">
								Por favor, seleccione un motivo.
							</div>
							</div>
							<div class="form-group col-md-4">
								<label for="exampleFormControlSelect1" class="form-label">Tipo Reembolso</label>
								<select class="form-control" id="exampleFormControlSelect1" required>
									<option value="">Seleccione</option>
									<option value="producto">Producto</option>
									<option value="efectivo">Efectivo</option>
								</select>
								<div class="invalid-feedback">
								Por favor, seleccione un tipo de reembolso.
							</div>
							</div>
							<div class="col-md-4">
								<label for="inputNit" class="form-label">Código</label>
								<i class="bi bi-upc-scan"> <input type="number" class="form-control" id="code"
										pattern="[0-9]+" required><div class="invalid-feedback">
									Por favor, ingrese un código válido (solo números).
								</div>
								</i>
							</div>
							<div class="col-md-4"><br>
								<label for="inputNit" class="form-label">N° Producto Reembolsado</label>
								<input type="number" class="form-control" id="productoReembolsado" required
									pattern="[0-9]+">
									<div class="invalid-feedback">
									Por favor, ingrese un código válido (solo números).
								</div>
							</div>
							<div class="col-md-4"><br>
								<label for="inputCantidad" class="form-label">Cantidad</label><br><br>
								<input type="number" class="form-control" id="Cantidad" min="1" pattern="[0-9]+"
									required><div class="invalid-feedback">
								Por favor, ingrese una cantidad válida (mínimo 1).
							</div>
							</div>
							<div class="col-md-4"><br>
								<label for="inputCantidad" class="form-label">Valor</label><br><br>
								<input type="number" class="form-control" id="valorCantidad" min="50" pattern="[0-9]+"
									required><div class="invalid-feedback">
								Por favor, ingrese un valor válido (mínimo 50).
							</div>
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button class="btn btn-secondary" type="button" data-bs-dismiss="modal">Cancelar</button>
					<button class="btn btn-primary submit-button" type="button"
						onclick="handleSubmit2()">Guardar</button>
				</div>
			</div>
		</div>
	</div>

	<script>
		function guardar() {
			Swal.fire({

				icon: "success",
				title: "Saved",
				showConfirmButton: true,
				timer: 1000
			});
		}

		async function confirmar() {
			const result = await Swal.fire({
				icon: "info",
				title: "Desea realizar una nueva devolución?",
				showDenyButton: true,
				showCancelButton: true,
				confirmButtonText: "Save",
				denyButtonText: `Don't save`,
				confirmButtonColor: '#2196F3'
			});

			if (result.isConfirmed) {
				Swal.fire({
					icon: "success",
					title: "Saved",
					showConfirmButton: true,
					confirmButtonColor: '#2196F3'
				});
			} else if (result.isDenied) {
				Swal.fire("Changes are not saved", "", "info");
			}
		}


		// Función para manejar la validación y envío del primer formulario
		function handleSubmit1() {
			var form = document.getElementById("createForm");
			if (form.checkValidity()) {
				// Aquí puedes realizar acciones adicionales antes de enviar el formulario, si es necesario
				form.submit();
				guardar(); // Llama a la función confirmar solo si el formulario es válido
			} else {
				event.preventDefault();
				event.stopPropagation();
				form.classList.add('was-validated');
			}
		}

		// Función para manejar la validación y envío del segundo formulario
		function handleSubmit2() {
			var form = document.getElementById("editForm");
			if (form.checkValidity()) {
				// Aquí puedes realizar acciones adicionales antes de enviar el formulario, si es necesario
				form.submit();
				guardar();
			} else {
				event.preventDefault();
				event.stopPropagation();
				form.classList.add('was-validated');
			}

		}

	</script>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

	<!-- Bootstrap Bundle (JS que incluye Popper.js) -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

	<!-- Otros scripts -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/webcodecam/1.9.1/webcodecam.min.js"></script>
	<script src="vendor/datatables/jquery.dataTables.min.js"></script>
	<script src="vendor/datatables/dataTables.bootstrap4.min.js"></script>
	<script src="js/datatables.js"></script>
	<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="js/sweetalert2.min.js"></script>
	<script src="js/main.js"></script>
	<script src="/public/js/sales.js"></script>
	<script src="js/material.min.js"></script>
	<script src="js/main.min.js"></script>
	<script src="/Tabmain.js"></script>
	<script src="/main.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>

</html>